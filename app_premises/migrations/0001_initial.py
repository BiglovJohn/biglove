# Generated by Django 4.1.1 on 2022-11-01 11:54

import app_premises.models
from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('app_companies', '__first__'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='RealtyObject',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('realty_name', models.CharField(max_length=100, verbose_name='Название объекта')),
                ('slug', models.SlugField(default=None, unique=True, verbose_name='URL')),
                ('realty_country', models.CharField(default='Россия', max_length=250, verbose_name='Страна')),
                ('realty_region', models.CharField(default='Московская область', max_length=250, verbose_name='Регион')),
                ('realty_city', models.CharField(default='Москва', max_length=250, verbose_name='Населенный пункт')),
                ('realty_address', models.CharField(help_text='Улица, дом, корпус...', max_length=250, verbose_name='Адрес')),
                ('realty_to_city', models.CharField(blank=True, max_length=10, verbose_name='Расстояние до города')),
                ('realty_type', models.CharField(choices=[('h', 'Отель'), ('c', 'Хостел'), ('a', 'Апартаменты'), ('ah', 'Апарт-отель'), ('gh', 'Гостевой дом'), ('k', 'Коттедж'), ('v', 'Вилла'), ('kp', 'Кемпинг'), ('gp', 'Глэмпинг')], max_length=2, verbose_name='Тип объекта')),
                ('count_of_persons', models.PositiveIntegerField(default=1, verbose_name='Количество спальных мест')),
                ('full_description', models.TextField(blank=True, max_length=2000, verbose_name='Описание')),
                ('realty_price', models.PositiveIntegerField(verbose_name='Цена')),
                ('realty_area', models.PositiveIntegerField(blank=True, verbose_name='Площадь')),
                ('book_cancel', models.CharField(choices=[('y', 'Беспл. отмена брони'), ('n', 'Нет беспл. отмены брони')], default='n', max_length=1, verbose_name='Отмена бронирования')),
                ('pay_type', models.CharField(choices=[('o', 'Оплата онлайн'), ('c', 'Оплата на месте')], default='o', max_length=1, verbose_name='Способ оплаты')),
                ('food_options', models.CharField(choices=[('a', 'Завтрак включён'), ('b', 'Завтрак + обед или ужин включены'), ('c', 'Завтрак, обед и ужин включены'), ('d', 'Всё включено'), ('e', 'Питание не включено')], default='e', max_length=1, verbose_name='Опции питания')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Дата создания')),
                ('realty_book_count', models.PositiveIntegerField(default=0, verbose_name='Бронирований')),
                ('company', models.ForeignKey(default=None, on_delete=django.db.models.deletion.CASCADE, related_name='the_manager', to='app_companies.companyprofile', verbose_name='Пользователь')),
            ],
            options={
                'verbose_name': 'Недвижимость',
                'verbose_name_plural': 'Недвижимость',
                'db_table': 'premises_db',
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='RealtyOptions',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('option_name', models.CharField(max_length=100, verbose_name='Название опции')),
                ('category', models.CharField(blank=True, max_length=50, verbose_name='Гатегория')),
                ('icon_url', models.CharField(blank=True, max_length=100, verbose_name='Иконка')),
            ],
            options={
                'verbose_name': 'Опция',
                'verbose_name_plural': 'Опции',
                'db_table': 'options_db',
                'ordering': ['id'],
            },
        ),
        migrations.CreateModel(
            name='Reservation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('check_in', models.DateField(verbose_name='Дата заезда')),
                ('check_out', models.DateField(verbose_name='Дата выселения')),
                ('is_booked', models.BooleanField(default=False, verbose_name='Бронь')),
                ('total_sum', models.IntegerField(default=0, verbose_name='Сумма')),
                ('guest', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='Гости')),
                ('realty', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='app_premises.realtyobject', verbose_name='Объект недвижимости')),
            ],
            options={
                'verbose_name': 'Бронирование',
                'verbose_name_plural': 'Бронирования',
                'db_table': 'reservation_db',
                'ordering': ['check_in'],
            },
        ),
        migrations.AddField(
            model_name='realtyobject',
            name='options',
            field=models.ManyToManyField(blank=True, related_name='option_list', to='app_premises.realtyoptions', verbose_name='Опции'),
        ),
        migrations.CreateModel(
            name='Photos',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('photo', models.ImageField(blank=True, upload_to=app_premises.models.user_directory_path, validators=[app_premises.models.max_value, django.core.validators.FileExtensionValidator(['jpg', 'jpeg', 'png'], 'Поддерживаются файлы JPG, JPEG и PNG')], verbose_name='Фотография')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Дата загрузки')),
                ('realty_obj', models.ForeignKey(default=1, on_delete=django.db.models.deletion.CASCADE, related_name='photos', to='app_premises.realtyobject', verbose_name='Идентификатор объекта')),
            ],
            options={
                'verbose_name': 'Фотография',
                'verbose_name_plural': 'Фотографии',
                'db_table': 'db.photo',
                'ordering': ['created_at'],
            },
        ),
    ]
